{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/yuriikalashnikov/Desktop/popular-user-in-github/containers/GithubMostPopularList.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n\n/* eslint-disable react/button-has-type */\n\n/* eslint-disable-next-line react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Typography } from '@material-ui/core';\nimport GlobalSnackbar from '../../components_libs/GlobalSnackbar';\nimport LoadingSpinner from '../../components_libs/LoadingSpinner';\nimport { loadMostPopularUsers, handleCityToSearchChange, handleSnackBarStatus } from '../../actions/getUserActions';\nimport Button from '@material-ui/core/Button';\nimport Autosuggest from 'react-autosuggest';\nimport EachUserListItem from './EachUserListItem';\nimport cityList from '../../utils/country-city-js';\nimport { defaultTheme } from 'react-autosuggest/dist/theme';\nimport { useStyles } from './GithubMostPopularListStyles';\nimport TablePagination from '@material-ui/core/TablePagination';\n\nvar escapeRegexCharacters = function escapeRegexCharacters(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n};\n\nvar getSuggestions = function getSuggestions(value) {\n  var escapedValue = escapeRegexCharacters(value.trim());\n\n  if (escapedValue === '') {\n    return [];\n  }\n\n  var regex = new RegExp('^' + escapedValue, 'i');\n  return cityList.filter(function (language) {\n    return regex.test(language.name);\n  });\n};\n\nvar getSuggestionValue = function getSuggestionValue(suggestion) {\n  return suggestion.name;\n};\n\nvar renderSuggestion = function renderSuggestion(suggestion) {\n  return __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, suggestion.name);\n};\n\nvar GithubMostPopularList = function GithubMostPopularList() {\n  var globalStore = useSelector(function (state) {\n    return state.globalStore;\n  });\n  var dispatch = useDispatch();\n  var classes = useStyles();\n\n  var _useState = useState(''),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var _useState2 = useState([]),\n      suggestions = _useState2[0],\n      setSuggestions = _useState2[1];\n\n  var _useState3 = useState(''),\n      currentCityShown = _useState3[0],\n      setcurrentCityShown = _useState3[1];\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      page = _React$useState2[0],\n      setPage = _React$useState2[1];\n\n  var _React$useState3 = React.useState(10),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      rowsPerPage = _React$useState4[0],\n      setRowsPerPage = _React$useState4[1];\n\n  useEffect(function () {\n    dispatch(loadMostPopularUsers(currentCityShown, page, rowsPerPage));\n  }, [currentCityShown, dispatch, page, rowsPerPage]);\n\n  var handleChangePage = function handleChangePage(event, newPage) {\n    setPage(newPage);\n  };\n\n  var handleChangeRowsPerPage = function handleChangeRowsPerPage(event) {\n    setRowsPerPage(_parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  var closeSnackbar = function closeSnackbar() {\n    return dispatch(handleSnackBarStatus(false));\n  };\n\n  var loadAllData = function loadAllData() {\n    var city = globalStore.city_to_search;\n    setcurrentCityShown(city);\n    dispatch(loadMostPopularUsers(city, page, rowsPerPage));\n  };\n\n  var onChange = function onChange(event, _ref) {\n    var newValue = _ref.newValue,\n        method = _ref.method;\n    dispatch(handleCityToSearchChange(newValue));\n    setValue(newValue);\n  };\n\n  var onSuggestionsFetchRequested = function onSuggestionsFetchRequested(_ref2) {\n    var value = _ref2.value;\n    setSuggestions(getSuggestions(value));\n  };\n\n  var onSuggestionsClearRequested = function onSuggestionsClearRequested() {\n    setSuggestions([]);\n  };\n\n  var inputProps = {\n    placeholder: 'Start typing your city name',\n    value: value,\n    onChange: onChange\n  };\n  return __jsx(\"div\", {\n    className: classes.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.tableAndFabContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, console.log('PAGE ', page), globalStore.loading ? __jsx(\"div\", {\n    className: classes.spinner,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, __jsx(LoadingSpinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  })) : __jsx(\"div\", {\n    className: classes.table,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, console.log('SNACKBAR ', globalStore.snackbar), __jsx(\"div\", {\n    className: classes.inputandButtonContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, __jsx(Autosuggest, {\n    suggestions: suggestions,\n    onSuggestionsFetchRequested: onSuggestionsFetchRequested,\n    onSuggestionsClearRequested: onSuggestionsClearRequested,\n    getSuggestionValue: getSuggestionValue,\n    renderSuggestion: renderSuggestion,\n    inputProps: inputProps,\n    theme: _objectSpread({}, defaultTheme, {\n      container: classes.react_autosuggest__container,\n      input: classes.react_autosuggest__input,\n      inputOpen: classes.react_autosuggest__input__open,\n      inputFocused: classes.react_autosuggest__input__focused,\n      suggestionsContainer: classes.react_autosuggest__suggestions_container,\n      suggestionsContainerOpen: classes.react_autosuggest__suggestions_container__open,\n      suggestionsList: classes.react_autosuggest__suggestions_list,\n      suggestion: classes.react_autosuggest__suggestion,\n      suggestionHighlighted: classes.react_autosuggest__suggestion__highlighted\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), __jsx(Button, {\n    onClick: loadAllData,\n    variant: \"contained\",\n    size: \"large\",\n    color: \"primary\",\n    disabled: globalStore.city_to_search === '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"h3\",\n    className: classes.modalButtonLabelEnabled,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Load City Data\"))), __jsx(\"div\", {\n    style: {\n      marginTop: '20px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, __jsx(EachUserListItem, {\n    currentCityShown: currentCityShown,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }))), __jsx(TablePagination, {\n    rowsPerPageOptions: [10, 15, 20],\n    component: \"div\",\n    count: globalStore.totalNoOfUsersFromAPI,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    onChangePage: handleChangePage,\n    onChangeRowsPerPage: handleChangeRowsPerPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }), __jsx(GlobalSnackbar, {\n    open: globalStore.snackbar === true || typeof globalStore.snackbar === 'object' || typeof globalStore.snackbar === 'string' || globalStore.snackbar instanceof String,\n    variant: \"error\",\n    message: 'Error occurred while loading Initial Data',\n    onClose: closeSnackbar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  })));\n};\n\nGithubMostPopularList.propTypes = {\n  onClose: PropTypes.func.isRequired\n};\nexport default GithubMostPopularList;","map":{"version":3,"sources":["/Users/yuriikalashnikov/Desktop/popular-user-in-github/containers/GithubMostPopularList.js"],"names":["React","useEffect","useState","useSelector","useDispatch","PropTypes","Typography","GlobalSnackbar","LoadingSpinner","loadMostPopularUsers","handleCityToSearchChange","handleSnackBarStatus","Button","Autosuggest","EachUserListItem","cityList","defaultTheme","useStyles","TablePagination","escapeRegexCharacters","str","replace","getSuggestions","value","escapedValue","trim","regex","RegExp","filter","language","test","name","getSuggestionValue","suggestion","renderSuggestion","GithubMostPopularList","globalStore","state","dispatch","classes","setValue","suggestions","setSuggestions","currentCityShown","setcurrentCityShown","page","setPage","rowsPerPage","setRowsPerPage","handleChangePage","event","newPage","handleChangeRowsPerPage","target","closeSnackbar","loadAllData","city","city_to_search","onChange","newValue","method","onSuggestionsFetchRequested","onSuggestionsClearRequested","inputProps","placeholder","container","tableAndFabContainer","console","log","loading","spinner","table","snackbar","inputandButtonContainer","react_autosuggest__container","input","react_autosuggest__input","inputOpen","react_autosuggest__input__open","inputFocused","react_autosuggest__input__focused","suggestionsContainer","react_autosuggest__suggestions_container","suggestionsContainerOpen","react_autosuggest__suggestions_container__open","suggestionsList","react_autosuggest__suggestions_list","react_autosuggest__suggestion","suggestionHighlighted","react_autosuggest__suggestion__highlighted","modalButtonLabelEnabled","marginTop","totalNoOfUsersFromAPI","String","propTypes","onClose","func","isRequired"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable react/button-has-type */\n/* eslint-disable-next-line react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { Typography } from '@material-ui/core'\nimport GlobalSnackbar from '../../components_libs/GlobalSnackbar'\nimport LoadingSpinner from '../../components_libs/LoadingSpinner'\nimport {\n  loadMostPopularUsers,\n  handleCityToSearchChange,\n  handleSnackBarStatus,\n} from '../../actions/getUserActions'\nimport Button from '@material-ui/core/Button'\nimport Autosuggest from 'react-autosuggest'\nimport EachUserListItem from './EachUserListItem'\nimport cityList from '../../utils/country-city-js'\nimport { defaultTheme } from 'react-autosuggest/dist/theme'\nimport { useStyles } from './GithubMostPopularListStyles'\nimport TablePagination from '@material-ui/core/TablePagination'\n\nconst escapeRegexCharacters = str => {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n}\n\nconst getSuggestions = value => {\n  const escapedValue = escapeRegexCharacters(value.trim())\n  if (escapedValue === '') {\n    return []\n  }\n  const regex = new RegExp('^' + escapedValue, 'i')\n  return cityList.filter(language => regex.test(language.name))\n}\n\nconst getSuggestionValue = suggestion => {\n  return suggestion.name\n}\n\nconst renderSuggestion = suggestion => {\n  return <span>{suggestion.name}</span>\n}\n\nconst GithubMostPopularList = () => {\n  const globalStore = useSelector(state => state.globalStore)\n  const dispatch = useDispatch()\n  const classes = useStyles()\n  const [value, setValue] = useState('')\n  const [suggestions, setSuggestions] = useState([])\n  const [currentCityShown, setcurrentCityShown] = useState('')\n\n  const [page, setPage] = React.useState(0)\n  const [rowsPerPage, setRowsPerPage] = React.useState(10)\n\n  useEffect(() => {\n    dispatch(loadMostPopularUsers(currentCityShown, page, rowsPerPage))\n  }, [currentCityShown, dispatch, page, rowsPerPage])\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage)\n  }\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10))\n    setPage(0)\n  }\n\n  const closeSnackbar = () => dispatch(handleSnackBarStatus(false))\n\n  const loadAllData = () => {\n    const city = globalStore.city_to_search\n    setcurrentCityShown(city)\n    dispatch(loadMostPopularUsers(city, page, rowsPerPage))\n  }\n\n  const onChange = (event, { newValue, method }) => {\n    dispatch(handleCityToSearchChange(newValue))\n    setValue(newValue)\n  }\n\n  const onSuggestionsFetchRequested = ({ value }) => {\n    setSuggestions(getSuggestions(value))\n  }\n\n  const onSuggestionsClearRequested = () => {\n    setSuggestions([])\n  }\n\n  const inputProps = {\n    placeholder: 'Start typing your city name',\n    value,\n    onChange: onChange,\n  }\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.tableAndFabContainer}>\n        {console.log('PAGE ', page)}\n        {globalStore.loading ? (\n          <div className={classes.spinner}>\n            <LoadingSpinner />\n          </div>\n        ) : (\n          <div className={classes.table}>\n            {console.log('SNACKBAR ', globalStore.snackbar)}\n            <div className={classes.inputandButtonContainer}>\n              <Autosuggest\n                suggestions={suggestions}\n                onSuggestionsFetchRequested={onSuggestionsFetchRequested}\n                onSuggestionsClearRequested={onSuggestionsClearRequested}\n                getSuggestionValue={getSuggestionValue}\n                renderSuggestion={renderSuggestion}\n                inputProps={inputProps}\n                theme={{\n                  ...defaultTheme,\n                  container: classes.react_autosuggest__container,\n                  input: classes.react_autosuggest__input,\n                  inputOpen: classes.react_autosuggest__input__open,\n                  inputFocused: classes.react_autosuggest__input__focused,\n                  suggestionsContainer:\n                    classes.react_autosuggest__suggestions_container,\n                  suggestionsContainerOpen:\n                    classes.react_autosuggest__suggestions_container__open,\n                  suggestionsList: classes.react_autosuggest__suggestions_list,\n                  suggestion: classes.react_autosuggest__suggestion,\n                  suggestionHighlighted:\n                    classes.react_autosuggest__suggestion__highlighted,\n                }}\n              />\n              <Button\n                onClick={loadAllData}\n                variant=\"contained\"\n                size=\"large\"\n                color=\"primary\"\n                disabled={globalStore.city_to_search === ''}\n              >\n                <Typography\n                  variant=\"h3\"\n                  className={classes.modalButtonLabelEnabled}\n                >\n                  Load City Data\n                </Typography>\n              </Button>\n            </div>\n            <div style={{ marginTop: '20px' }}>\n              <EachUserListItem\n                currentCityShown={currentCityShown}\n              ></EachUserListItem>\n            </div>\n          </div>\n        )}\n        <TablePagination\n          rowsPerPageOptions={[10, 15, 20]}\n          component=\"div\"\n          count={globalStore.totalNoOfUsersFromAPI}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          onChangePage={handleChangePage}\n          onChangeRowsPerPage={handleChangeRowsPerPage}\n        />\n        <GlobalSnackbar\n          open={\n            globalStore.snackbar === true ||\n            typeof globalStore.snackbar === 'object' ||\n            typeof globalStore.snackbar === 'string' ||\n            globalStore.snackbar instanceof String\n          }\n          variant=\"error\"\n          message={'Error occurred while loading Initial Data'}\n          onClose={closeSnackbar}\n        />\n      </div>\n    </div>\n  )\n}\n\nGithubMostPopularList.propTypes = {\n  onClose: PropTypes.func.isRequired,\n}\n\nexport default GithubMostPopularList\n"]},"metadata":{},"sourceType":"module"}